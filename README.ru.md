# Go Todo List API

#### [English](README.md) | [Français](README.fr.md) | Русский
### Посмотрите [демо-версию](https://go-todo-list-api.onrender.com/) (пароль: `test12345`)

**Обратите внимание, что демо-версия размещена на бесплатном плане Render, поэтому может потребоваться некоторое время для запуска сервера при обращении к нему.**

## О проекте
Этот проект представляет собой простую API для управления списком задач, написанную на Go. Она предоставляет бэкенд-сервис, который позволяет пользователям создавать, читать, обновлять и удалять задачи. Приложение использует JSON Web Tokens (JWT) для безопасной аутентификации и SQLite для постоянного хранения данных. В дополнение к базовому управлению задачами, API также поддерживает планирование задач с пользовательскими интервалами повторения.

API построена с использованием многослойной архитектуры, с разделением на отдельные слои для API. Основные 4 слоя:
- **Слой контроллера**: Обрабатывает входящие HTTP-запросы и направляет их к соответствующему обработчику, находящемуся в каталоге `internal/server`.
- **Слой сервиса**: Содержит бизнес-логику приложения, находящуюся в каталоге `internal/service`.
- **Слой репозитория**: Обрабатывает взаимодействие с базой данных, находящейся в каталоге `internal/storage`.
- **Слой сущностей**: Содержит сущности данных, используемые приложением, находящиеся в каталоге `internal/models`.

Кроме того, приложение имеет простой веб-интерфейс для взаимодействия с API. Веб-интерфейс создан с использованием HTML, CSS и JavaScript, которые минимизированы и находятся в каталоге `web/`.

В корневом каталоге проекта находится Dockerfile, который можно использовать для создания Docker-образа приложения. Dockerfile использует многоступенчатую сборку для создания легкого образа с бинарным файлом приложения и необходимыми файлами.

## Возможности
- Управление задачами: создание, чтение, обновление и удаление задач.
- Планирование задач: планирование задач на будущие даты с возможностью настройки интервала повторения.
- Аутентификация: безопасный вход с использованием JWT.
- Постоянное хранение данных с использованием SQLite.
- RESTful API, построенное на маршрутизаторе Chi.

## Зависимости
Проект использует следующие зависимости:
- **Chi Router**: Легкий и идиоматичный маршрутизатор для Go (`github.com/go-chi/chi/v5`)
- **JWT**: Обработка аутентификации (`github.com/golang-jwt/jwt/v4`)
- **SQLx**: Набор инструментов для работы с SQL в Go (`github.com/jmoiron/sqlx`)
- **SQLite3**: Драйвер для базы данных (`github.com/mattn/go-sqlite3`)
- **Testify**: Утилиты для тестирования (`github.com/stretchr/testify`)

**Примечание:** Для запуска приложения вам понадобится версия Go **1.22.2** или выше.

## Установка
1. Клонируйте репозиторий:
```bash
git clone https://github.com/antonkazachenko/go-todo-list-api.git
```

2. Перейдите в каталог проекта:
```bash
cd go-todo-list-api
```

3. Установите зависимости:
```bash
go mod tidy
```

## Переменные окружения
Для локального запуска сервера вы можете настроить следующие переменные окружения:

- `TODO_DBFILE`: Путь к файлу базы данных SQLite (по умолчанию: `scheduler.db`)
- `TODO_PORT`: Порт, на котором будет работать сервер (по умолчанию: `7540`)
- `TODO_PASSWORD`: Пароль, используемый для подписи JWT (по умолчанию: пустой)

Вы можете установить эти переменные окружения в вашем шелле перед запуском приложения:

```bash
export TODO_DBFILE="your_db_file.db"
export TODO_PORT="your_port_number"
export TODO_PASSWORD="your_password"
```

Если вы не установите переменные окружения, приложение будет использовать значения по умолчанию.

## Использование
1. Соберите и запустите проект:
```bash
go run main.go
```

2. Доступ к API осуществляется по адресу `http://localhost:PORT/` (Замените `PORT` на фактический порт, указанный в вашей конфигурации, или используйте порт по умолчанию `7540`).

## Эндпоинты API
Вот краткий обзор основных конечных точек API:

- **POST /api/task** - Создать новую задачу.
- **GET /api/tasks** - Получить все задачи.
- **GET /api/task** - Получить конкретную задачу.
- **PUT /api/task** - Обновить конкретную задачу.
- **DELETE /api/task** - Удалить конкретную задачу.
- **POST /api/task/done** - Отметить задачу как выполненную.
- **POST /api/signin** - Вход пользователя.

## Аутентификация
Аутентификация в этом приложении осуществляется с помощью JSON Web Tokens (JWT). После успешного входа JWT генерируется и возвращается пользователю. Эта функциональность может быть видна на вкладке сети в инструментах разработчика браузера.

Если вы не настроите переменную окружения `TODO_PASSWORD`, приложение не будет использовать JWT для аутентификации.

## Тестирование
- Проект использует Testify для модульного тестирования.
- Тесты находятся в каталоге `tests/`.
- Запустите тесты с помощью:
```bash
go test ./tests
```

## Помощь и улучшения
Приветствуются любые ваши замечания! Пожалуйста, не стесняйтесь cоздавать и отправлять Pull Request.

## Лицензия
Этот проект лицензирован под лицензией MIT. См. файл `LICENSE` для получения подробной информации.
